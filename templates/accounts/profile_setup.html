{% extends '../products/base.html' %}

{% block title %}InvestNest | Complete Your Profile{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto p-6 bg-white shadow-lg rounded-lg">
    <h2 class="text-3xl font-semibold text-gray-800 mb-6 text-center">Complete Your Profile</h2>

    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        
        <div class="space-y-6">
            <!-- Profile Picture -->
            <div>
                <label for="id_profile_pic" class="block text-lg font-medium text-gray-700 mb-2">Profile Picture</label>
            
                <!-- Image Preview -->
                <div class="flex items-center space-x-4 mb-4">
                    <img id="previewImage" src="{% if user.profile.profile_pic %}{{ user.profile.profile_pic.url }}{% else %}https://placehold.co/100?='bhj'{% endif %}" alt={{ user.username|slice:":1"|upper }} class="w-24 h-24 object-cover rounded-full border shadow">
                    <label for="id_profile_pic" class="cursor-pointer inline-flex items-center px-4 py-2 bg-blue-100 text-blue-700 rounded-md shadow-sm hover:bg-blue-200 transition">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
                            <path d="M16.707 5.293a1 1 0 00-1.414 0L10 10.586 7.707 8.293a1 1 0 00-1.414 1.414l3 3a1 1 0 001.414 0l6-6a1 1 0 000-1.414z" />
                        </svg>
                        Choose Image
                    </label>
                </div>
            
                <input type="file" name="profile_pic" id="id_profile_pic" accept="image/*" class="hidden">
            </div>

            <!-- First Name -->
            <div>
                <label for="id_firstname" class="block text-lg font-medium text-gray-700">First Name</label>
                <input type="text" name="firstname" id="id_firstname" value="{{ form.firstname.value }}" class="mt-1 block w-full border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500">
            </div>

            <!-- Last Name -->
            <div>
                <label for="id_lastname" class="block text-lg font-medium text-gray-700">Last Name</label>
                <input type="text" name="lastname" id="id_lastname" value="{{ form.lastname.value }}" class="mt-1 block w-full border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500">
            </div>

            <!-- Bio -->
            <div>
                <label for="id_bio" class="block text-lg font-medium text-gray-700">Bio</label>
                <textarea name="bio" id="id_bio" class="mt-1 block w-full border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500">{{ form.bio.value }}</textarea>
            </div>

            
            <!-- Website -->
            <div>
                <label for="id_website" class="block text-lg font-medium text-gray-700">Website</label>
                <input type="url" name="website" id="id_website" value="{{ form.website.value }}" class="mt-1 block w-full border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500">
            </div>

            <!-- Email -->
            <div>
                <label for="id_email" class="block text-lg font-medium text-gray-700">Email</label>
                <input type="email" name="email" id="id_email" value="{{ form.email.value }}" class="mt-1 block w-full border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500">
            </div>

            <!-- GitHub -->
            <div>
                <label for="id_github" class="block text-lg font-medium text-gray-700">GitHub</label>
                <input type="url" name="github" id="id_github" value="{{ form.github.value }}" class="mt-1 block w-full border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500">
            </div>

            <!-- Phone -->
            <div>
                <label for="id_phone" class="block text-lg font-medium text-gray-700">Phone</label>
                <input type="tel" name="phone" id="id_phone" value="{{ form.phone.value }}" class="mt-1 block w-full border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500">
            </div>

            <!-- Address -->
            <div>
                <label for="id_address" class="block text-lg font-medium text-gray-700">Address</label>
                <input type="text" name="address" id="id_address" value="{{ form.address.value }}" class="mt-1 block w-full border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500">
            </div>

            <!-- City -->
            <div>
                <label for="id_city" class="block text-lg font-medium text-gray-700">City</label>
                <input type="text" name="city" id="id_city" value="{{ form.city.value }}" class="mt-1 block w-full border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500">
            </div>

            <!-- State -->
            <div>
                <label for="id_state" class="block text-lg font-medium text-gray-700">State</label>
                <input type="text" name="state" id="id_state" value="{{ form.state.value }}" class="mt-1 block w-full border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500">
            </div>

            <!-- Zipcode -->
            <div>
                <label for="id_zipcode" class="block text-lg font-medium text-gray-700">Zip Code</label>
                <input type="text" name="zipcode" id="id_zipcode" value="{{ form.zipcode.value }}" class="mt-1 block w-full border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500">
            </div>

            <!-- Country -->
            <div>
                <label for="id_country" class="block text-lg font-medium text-gray-700">Country</label>
                <input type="text" name="country" id="id_country" value="{{ form.country.value }}" class="mt-1 block w-full border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500">
            </div>

            <!-- Social Media Links -->
            <div class="space-y-4">
                <div>
                    <label for="id_twitter" class="block text-lg font-medium text-gray-700">Twitter</label>
                    <input type="url" name="twitter" id="id_twitter" value="{{ form.twitter.value }}" class="mt-1 block w-full border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500">
                </div>

                <div>
                    <label for="id_linkedin" class="block text-lg font-medium text-gray-700">LinkedIn</label>
                    <input type="url" name="linkedin" id="id_linkedin" value="{{ form.linkedin.value }}" class="mt-1 block w-full border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500">
                </div>

                <div>
                    <label for="id_facebook" class="block text-lg font-medium text-gray-700">Facebook</label>
                    <input type="url" name="facebook" id="id_facebook" value="{{ form.facebook.value }}" class="mt-1 block w-full border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500">
                </div>

                <div>
                    <label for="id_instagram" class="block text-lg font-medium text-gray-700">Instagram</label>
                    <input type="url" name="instagram" id="id_instagram" value="{{ form.instagram.value }}" class="mt-1 block w-full border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500">
                </div>

                <div>
                    <label for="id_youtube" class="block text-lg font-medium text-gray-700">YouTube</label>
                    <input type="url" name="youtube" id="id_youtube" value="{{ form.youtube.value }}" class="mt-1 block w-full border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500">
                </div>
            </div>

            <!-- is investor -->
            <div>
                <label class="inline-flex items-center text-sm text-gray-700">
                    {{ form.is_investor }}
                    <span class="ml-2">Investor</span>
                </label>
            </div>

            <div class="text-center mt-6">
                <button type="submit" class="text-white bg-blue-500 hover:bg-blue-700 py-2 px-6 rounded-full transition duration-300">Save</button>
            </div>
        </div>
    </form>
</div>
{% endblock %}

{% block extra_js %}
<script>
    console.log("Preview script loaded");

    function previewImage(event) {
        const input = event.target;
        const preview = document.getElementById('previewImage');

        if (input.files && input.files[0]) {
            const reader = new FileReader();

            reader.onload = function(e) {
                preview.src = e.target.result;
            };

            reader.readAsDataURL(input.files[0]);
        }
    }

    document.addEventListener("DOMContentLoaded", function () {
        const fileInput = document.getElementById("id_profile_pic");
        if (fileInput) {
            fileInput.addEventListener("change", previewImage);
        }
    });
</script>
{% endblock %}


